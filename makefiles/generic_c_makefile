CC=gcc
WARNINGS=-Wall -Wextra -Wconversion
OPTIMIZATIONS==-O3 -march=native -mtune=native
CFLAGS=${WARNINGS} ${OPTIMIZATIONS}

CFILES=$(wildcard src/*)
IFILES=$(wildcard include/*)
OBJFILES=$(foreach s,${CFILES},$(patsubst src/%.c,obj/%.o,$s))




.PHONY: all
all: $(OBJFILES)


obj/%.o: src/%.c ${IFILES} | obj
	$(CC) ${CFLAGS} -Iinclude $< -c -o $@




obj:
	mkdir obj


.PHONY: clean
clean:
	$(RM) -r obj


.PHONY: distclean
distclean: clean


